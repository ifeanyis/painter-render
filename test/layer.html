<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>图层测试</title>
  <link rel="stylesheet" href="../node_modules/easycss-core/build/easycss.min.css">
  <script src="../node_modules/clay-core/build/clay-core.min.js"></script>
  <script src="../node_modules/clay-2d/build/clay-2d.js"></script>
  <script src="../build/painter-render.js"></script>
</head>

<body>

  <script>

    var canvas = $$("<canvas>非常抱歉，您的浏览器不支持canvas!</canvas>")
      .appendTo('body')
      .css({
        "background-color": "#edeff0"
      })
      .attr('width', 700)
      .attr('height', 500);

    // 建立绘图对象
    var painter = painterRender(canvas[0]);

    // 添加图层
    painter.layer.add('layer-1');
    painter.layer.add('layer-2');
    painter.layer.add('layer-3');

    // 绘制文字
    $canvas.text(painter.layer.see('layer-1').painter).setColor('red').setSize(30)(350, 250, '这是图层一的文字', Math.PI / 4);
    $canvas.text(painter.layer.see('layer-2').painter).setColor('blue').setSize(30)(350, 250, '这是图层二的文字');
    $canvas.text(painter.layer.see('layer-3').painter).setColor('green').setSize(30)(350, 250, '这是图层三的文字', -Math.PI / 4);

    // 把第二个图层选择一部分绘制到第一个图层
    painter.layer.draw({
      "id": "layer-1",
      "x": 300,
      "y": 200,
      "width": 100,
      "height": 100
    }, {
        "id": "layer-2",
        "width": 100,
        "height": 100
      });

    // 控制图层显示
    var next = 0;
    window.setInterval(function () {
      painter.layer.togger('layer-' + (next + 1));
      painter.layer.update();
      next = (next + 1) % 3;
    }, 1000);

  </script>

</body>

</html>